

<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecycLog</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Auth Section (Hidden when logged in) -->
    <div id="auth-section" class="auth-container">
        <div class="auth-box">
            <h1><i class="fas fa-recycle"></i> RecycLog</h1>
            <p class="auth-subtitle">Track your recycling impact</p>
            
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="showTab('login')">Login</button>
                <button class="tab-btn" onclick="showTab('register')">Register</button>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required>
                </div>
                <button type="submit" class="auth-btn">Login</button>
                <div id="login-error" class="error-message"></div>
            </form>

            <!-- Register Form -->
            <form id="register-form" class="auth-form hidden">
                <div class="form-group">
                    <label for="register-username">Username</label>
                    <input type="text" id="register-username" required>
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" required>
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" required>
                </div>
                <button type="submit" class="auth-btn">Create Account</button>
                <div id="register-error" class="error-message"></div>
            </form>
        </div>
    </div>

    <!-- Main App Section (Hidden when not logged in) -->
    <div id="app-section" class="app-container hidden">
        <button class="menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
        
        <div class="sidebar">
            <h1><i class="fas fa-recycle"></i> RecycLog</h1>
            <div class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-home"></i> Dashboard
            </div>
            <div class="nav-item" onclick="showSection('statistics')">
                <i class="fas fa-chart-bar"></i> Statistics
            </div>
            <div class="nav-item" onclick="showSection('challenges')">
                <i class="fas fa-trophy"></i> Challenges
            </div>
            <div class="nav-item" onclick="showSection('community')">
                <i class="fas fa-users"></i> Community
            </div>
            <div class="nav-item" onclick="showSection('rewards')">
                <i class="fas fa-gift"></i> Rewards
            </div>
            <div class="nav-item" onclick="showSection('profile')">
                <i class="fas fa-user"></i> Profile
            </div>
            <div class="nav-item" onclick="showSection('settings')">
                <i class="fas fa-cog"></i> Settings
            </div>
        </div>

        <div class="main-content">
            <section id="dashboard" class="section active">
                <div class="quick-actions">
                    <button class="action-btn" onclick="showLogModal()">
                        <i class="fas fa-plus"></i> Log Recycling
                    </button>
                    <button class="action-btn" onclick="startQRScanner()">
                        <i class="fas fa-qrcode"></i> QR Scanner
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3><i class="fas fa-box"></i> Total Items Recycled</h3>
                        <p id="total-items">0</p>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-leaf"></i> CO2 Saved</h3>
                        <p id="co2-saved">0 kg</p>
                    </div>
                    <div class="stat-card">
                        <h3><i class="fas fa-star"></i> Points Earned</h3>
                        <p id="points">0</p>
                    </div>
                </div>

                <div class="date-range-picker">
                    <label for="start-date">Start Date:</label>
                    <input type="date" id="start-date">
                    <label for="end-date">End Date:</label>
                    <input type="date" id="end-date">
                    <button onclick="updateChartDateRange()">
                        <i class="fas fa-sync"></i> Update Chart
                    </button>
                </div>

                <div class="chart-container">
                    <canvas id="recycling-chart"></canvas>
                </div>

                <div class="activity-feed" id="activity-feed">
                    <h3><i class="fas fa-history"></i> Recent Activity</h3>
                </div>
            </section>

            <section id="statistics" class="section">
                <h2><i class="fas fa-chart-pie"></i> Detailed Statistics</h2>
                <div class="chart-container">
                    <canvas id="materials-chart"></canvas>
                </div>
            </section>

            <section id="challenges" class="section">
                <h2><i class="fas fa-trophy"></i> Active Challenges</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Weekly Challenge</h3>
                        <p>Recycle 50 items</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 60%"></div>
                        </div>
                        <p>30/50 items</p>
                    </div>
                    <div class="stat-card">
                        <h3>Monthly Challenge</h3>
                        <p>Save 100kg CO2</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 45%"></div>
                        </div>
                        <p>45/100 kg</p>
                    </div>
                </div>
            </section>

            <section id="community" class="section">
                <h2><i class="fas fa-users"></i> Leaderboard</h2>
                <div class="leaderboard">
                    <div class="leaderboard-header">
                        <span>Rank</span>
                        <span>User</span>
                        <span>Points</span>
                    </div>
                    <div id="leaderboard-list"></div>
                </div>
            </section>

            <section id="rewards" class="section">
                <h2><i class="fas fa-gift"></i> Your Rewards</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>10% Off Eco Store</h3>
                        <p>Cost: 1000 points</p>
                        <button class="action-btn" onclick="claimReward(1000, '10% Off Eco Store')">Claim</button>
                    </div>
                    <div class="stat-card">
                        <h3>Plant a Tree</h3>
                        <p>Cost: 2000 points</p>
                        <button class="action-btn" onclick="claimReward(2000, 'Plant a Tree')">Claim</button>
                    </div>
                </div>
            </section>

            <section id="profile" class="section">
                <h2><i class="fas fa-user"></i> Profile</h2>
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <img id="profile-avatar-img" src="https://via.placeholder.com/120x120/00b894/ffffff?text=U" alt="Profile Avatar">
                            <div class="avatar-upload">
                                <label for="avatar-input" class="avatar-upload-btn">
                                    <i class="fas fa-camera"></i> Change Photo
                                </label>
                                <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                            </div>
                        </div>
                        <div class="profile-info">
                            <h3 id="profile-username">Username</h3>
                            <p id="profile-email">email@example.com</p>
                            <p id="profile-join-date">Joined: January 2024</p>
                        </div>
                    </div>
                    
                    <div class="profile-form">
                        <h3>Update Profile</h3>
                        <form id="profile-update-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="profile-username-input">Username</label>
                                    <input type="text" id="profile-username-input" required>
                                </div>
                                <div class="form-group">
                                    <label for="profile-email-input">Email</label>
                                    <input type="email" id="profile-email-input" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="profile-password">New Password (leave blank to keep current)</label>
                                    <input type="password" id="profile-password" placeholder="New password">
                                </div>
                                <div class="form-group">
                                    <label for="profile-confirm-password">Confirm New Password</label>
                                    <input type="password" id="profile-confirm-password" placeholder="Confirm new password">
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="action-btn">
                                    <i class="fas fa-save"></i> Update Profile
                                </button>
                                <button type="button" onclick="resetProfileForm()" class="action-btn secondary">
                                    <i class="fas fa-undo"></i> Reset
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="profile-stats">
                        <h3>Your Statistics</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h4><i class="fas fa-box"></i> Total Items</h4>
                                <p id="profile-total-items">0</p>
                            </div>
                            <div class="stat-card">
                                <h4><i class="fas fa-leaf"></i> CO2 Saved</h4>
                                <p id="profile-co2-saved">0 kg</p>
                            </div>
                            <div class="stat-card">
                                <h4><i class="fas fa-star"></i> Points</h4>
                                <p id="profile-points">0</p>
                            </div>
                            <div class="stat-card">
                                <h4><i class="fas fa-calendar"></i> Member Since</h4>
                                <p id="profile-member-since">2024</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings" class="section">
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <div class="settings-container">
                    <div class="setting-item">
                        <label><i class="fas fa-palette"></i> Theme</label>
                        <div class="theme-toggle">
                            <button onclick="toggleTheme()" id="theme-btn">Switch to Dark Theme</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label><i class="fas fa-bell"></i> Notifications</label>
                        <input type="checkbox" id="notifications" checked>
                    </div>
                    <div class="setting-item">
                        <button onclick="logout()" class="logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Log Out
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <div id="log-modal" class="modal">
            <div class="modal-content">
                <h2><i class="fas fa-plus"></i> Log Recycling</h2>
                <select id="item-type">
                    <option value="plastic">Plastic</option>
                    <option value="glass">Glass</option>
                    <option value="paper">Paper</option>
                    <option value="metal">Metal</option>
                </select>
                <input type="number" id="item-quantity" placeholder="Quantity">
                <button onclick="logRecycling()">
                    <i class="fas fa-check"></i> Submit
                </button>
                <button onclick="closeModal()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>

        <div id="qr-modal" class="modal">
            <div class="modal-content">
                <button class="close-scanner" onclick="closeQRScanner()">
                    <i class="fas fa-times"></i>
                </button>
                <div id="qr-reader"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>